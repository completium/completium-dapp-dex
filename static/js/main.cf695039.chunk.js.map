{"version":3,"sources":["dapp.js","settings.js","dexstate.js","components/HeaderBar.js","components/SnackMsg.js","components/CoinItem.js","components/VerticalDivider.js","components/Dex.js","components/PlusDivider.js","components/Provider.js","components/Redeemer.js","App.js","reportWebVitals.js","index.js"],"names":["constate","appName","React","useState","wallet","tezos","accountPkh","setState","ready","Boolean","useEffect","ThanosWallet","onAvailabilityChange","available","connect","useCallback","network","opts","a","Error","tzs","toTezos","pkh","alert","message","v","DAppProvider","useWallet","useTezos","useAccountPkh","useReady","useConnect","dexContract","Tezos","TezosToolkit","account","fee","balance","balances","token","addr","poolvalue","totalqty","totallqt","liquidity","left","coin","amount","max","right","provider","maxb","xtzamount","maxxtzb","liqtoken","redeemer","dexState","setDexState","computeAmount","aA","qA","qB","f","g","computeFee","aB","aBnofee","Math","ceil","computeTok2TokAmount","qTA","qTB","alpha","computeAmounts","state","parseFloat","tA","tB","aF","parseInt","floor","computeTok2TokFee","console","log","isPoolEmpty","computeMintedLQT","xlq","Intl","NumberFormat","maximumSignificantDigits","format","computeRedeemedLQT","liqamount","ratio","forceRetrieveTokenBalance","address","contract","at","then","myContract","storage","myStorage","get","value","toString","catch","error","JSON","stringify","retrieveTokenBalance","setBalance","isReady","loadDexTokens","c","s","forEach","l","k","m","name","iconurl","loadLiquidity","resetDexCoins","resetProvider","resetRedeemer","getXTZFor","city","qty","srctotalqty","dsttotalqty","setLeftCoin","setRightCoin","setLeftAmount","isNaN","switchMax","setProviderCoin","setProviderAmount","setProviderXTZAmount","charAt","length","switchProviderMax","switchProviderXTZMax","setRedeemerCoin","setRedeemerMax","setRedeemerAmount","DexProvider","useDexStateContext","HeaderBar","props","visible","useMediaQuery","dark","theme","palette","type","AppBar","position","color","style","boxShadow","opacity","Toolbar","Typography","variant","fontFamily","Grid","container","justify","alignItems","item","visibility","textAlign","appTitle","Button","disableElevation","size","onClick","handleConnect","Link","href","rel","underline","backgroundColor","fontWeight","Alert","elevation","SnackMsg","Snackbar","open","severity","secondary","main","CoinItem","useTheme","icon","process","direction","spacing","xs","src","height","width","paddingLeft","show","textTransform","maximumFractionDigits","VerticialDivider","Divider","orientation","flexItem","borderStyle","borderWidth","borderRadius","borderColor","divider","top","useStyles","makeStyles","formControl","margin","minWidth","selectEmpty","marginTop","getBalanceFor","LeftEx","xtzbalance","classes","cities","concat","Object","keys","filter","paddingTop","FormControl","className","InputLabel","id","Select","labelId","onChange","event","target","label","labelWidth","MenuItem","map","paddingBottom","Switch","checked","disabled","TextField","InputProps","readOnly","helperText","RightEx","sent","exbalance","paddingRight","Exchange","initialized","setInititialized","lcoin","rcoin","dex","methods","exchange","send","op","openSnack","receipt","closeSnack","tz","getBalance","fa12","fa12params","approve","toTransferParams","kind","OpKind","TRANSACTION","dexparams","batch","Paper","lbalance","rbalance","cannotExchange","PlusDivider","marginLeft","svg","errorAmount","startAdornment","InputAdornment","on","Provider","addLiquidity","padding","Redeemer","removeLiquidity","getComponent","PageRouter","viewSnack","setViewSnack","setInitialized","computeBalance","setComputeBalance","setValue","prefersDarkMode","useMemo","createMuiTheme","light","contrastText","ThemeProvider","CssBaseline","Container","Tabs","indicatorColor","textColor","newValue","aria-label","Tab","App","Suspense","fallback","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cf695039.chunk.js","sourcesContent":["import React from 'react';\nimport constate from 'constate';\nimport { ThanosWallet } from '@thanos-wallet/dapp';\n\nexport const [\n  DAppProvider,\n  useWallet,\n  useTezos,\n  useAccountPkh,\n  useReady,\n  useConnect,\n] = constate(\n  useDApp,\n  (v) => v.wallet,\n  (v) => v.tezos,\n  (v) => v.accountPkh,\n  (v) => v.ready,\n  (v) => v.connect\n);\n\nfunction useDApp({ appName }) {\n  const [{ wallet, tezos, accountPkh }, setState] = React.useState(() => ({\n    wallet: null,\n    tezos: null,\n    accountPkh: null,\n  }));\n\n  const ready = Boolean(tezos);\n\n  React.useEffect(() => {\n    return ThanosWallet.onAvailabilityChange((available) => {\n      setState({\n        wallet: available ? new ThanosWallet(appName) : null,\n        tezos: null,\n        accountPkh: null,\n      });\n    });\n  }, [setState, appName]);\n\n  const connect = React.useCallback(\n    async (network, opts) => {\n      try {\n        if (!wallet) {\n          throw new Error('Thanos Wallet not available');\n        }\n        await wallet.connect(network, opts);\n        const tzs = wallet.toTezos();\n        const pkh = await tzs.wallet.pkh();\n        setState({\n          wallet,\n          tezos: tzs,\n          accountPkh: pkh,\n        });\n      } catch (err) {\n        alert(`Failed to connect ThanosWallet: ${err.message}`);\n      }\n    },\n    [setState, wallet]\n  );\n\n  return {\n    wallet,\n    tezos,\n    accountPkh,\n    ready,\n    connect,\n  };\n}\n\nexport function useOnBlock(tezos, callback) {\n  const blockHashRef = React.useRef();\n\n  React.useEffect(() => {\n    let sub;\n    spawnSub();\n    return () => sub.close();\n\n    function spawnSub() {\n      sub = tezos.stream.subscribe('head');\n\n      sub.on('data', (hash) => {\n        if (blockHashRef.current && blockHashRef.current !== hash) {\n          callback(hash);\n        }\n        blockHashRef.current = hash;\n      });\n      sub.on('error', (err) => {\n        if (process.env.NODE_ENV === 'development') {\n          console.error(err);\n        }\n        sub.close();\n        spawnSub();\n      });\n    }\n  }, [tezos, callback]);\n}","export const appTitle = \"Exchange city coins!\"\n\nexport const network = \"delphinet\"\n\nexport const appName = \"CityDexCorp.\"\n\nexport const dexContract = 'KT1J48AfBi8NwNaFQM1AXTvordRgSRJxK313'\n\nexport const cities = [ 'tezos', 'paris', 'london', 'moscow', 'nyc', 'tokyo', 'sydney', 'athenes', 'rio', 'rome' ];\n\nexport const getCityName = (city) => {\n  switch(city) {\n    case 'tezos'   : return 'Tezos';\n    case 'paris'   : return 'Paris';\n    case 'london'  : return 'London';\n    case 'moscow'  : return 'Moscow';\n    case 'nyc'     : return 'New York City';\n    case 'tokyo'   : return 'Tokyo';\n    case 'sydney'  : return 'Sydney';\n    case 'athenes' : return 'Athens';\n    case 'rio'     : return 'Rio de Janeiro';\n    case 'rome'    : return 'Rome';\n    default : return '';\n  }\n}\n\nexport const getCoinLabel = (city) => {\n  switch(city) {\n    case 'tezos'   : return 'XTZ';\n    case 'paris'   : return 'XPA';\n    case 'london'  : return 'XLD';\n    case 'moscow'  : return 'XMO';\n    case 'nyc'     : return 'XNY';\n    case 'tokyo'   : return 'XTK';\n    case 'sydney'  : return 'XSD';\n    case 'athenes' : return 'XAT';\n    case 'rio'     : return 'XRI';\n    case 'rome'    : return 'XRO';\n    default : return '';\n  }\n}\n\nexport const getBalanceFor = (coin) => {\n  const balance = {\n  'XLD' : '3450',\n  'XPA' : '1230',\n  'XNY' : '560',\n  'XRO' : '0',\n  'XTK' : '0',\n  'XAT' : '0',\n  'XMO' : '0',\n  'XSD' : '345',\n  'XRI' : '0',\n  };\n  return balance[coin];\n}","import { useState } from 'react';\nimport constate from 'constate';\nimport { useAccountPkh, useReady } from './dapp';\nimport { network, dexContract } from './settings';\nimport { TezosToolkit } from '@taquito/taquito';\n\nconst Tezos = new TezosToolkit('https://'+network+'-tezos.giganode.io');\n\nexport function useDexState() {\n  const account = useAccountPkh();\n  const ready = useReady();\n  const fee = 0.003;\n  const [dexState, setDexState] = useState({\n    balance : '',\n    balances : {},\n    token     : {\n      'XLD' : { addr: 'KT1MePDQK3VQooqSEwN3sN1WqyMiiGBKGkNX', poolvalue: '1976000000', totalqty: '1923300', totallqt: '1000000' },\n      'XPA' : { addr: 'KT1H8JUiFbvEMycCuG5sZfCGHkN7vgfLAs3n', poolvalue: '1288000000', totalqty: '1756020', totallqt: '1000000' },\n      'XNY' : { addr: 'KT1', poolvalue: '1852000000', totalqty: '1360000', totallqt: '1000000' },\n      'XRO' : { addr: 'KT1', poolvalue: '447000000',  totalqty: '1006540', totallqt: '1000000' },\n      'XTK' : { addr: 'KT1', poolvalue: '1348000000', totalqty: '998510',  totallqt: '1000000' },\n      'XAT' : { addr: 'KT1', poolvalue: '162000000',  totalqty: '572840',  totallqt: '1000000' },\n      'XMO' : { addr: 'KT1', poolvalue: '94000000',   totalqty: '551000',  totallqt: '1000000' },\n      /* 'XSD' : { addr: 'KT1', poolvalue: '640',  totalqty: '409060',  totallqt: '1000000' }, */\n      'XSD' : { addr: 'KT1', poolvalue: '0',  totalqty: '0',  totallqt: '0' },\n      'XRI' : { addr: 'KT1', poolvalue: '97000000',   totalqty: '227830',  totallqt: '1000000' },\n    },\n    liquidity : {\n      'XLD' : 1000000,\n      'XPA' : 1000000,\n    },\n    left : {\n      coin : '',\n      amount : '',\n      max : false\n    },\n    right : {\n      coin : '',\n      amount : '',\n      fee : ''\n    },\n    provider : {\n      coin: '',\n      amount: '',\n      maxb: false,\n      xtzamount: '',\n      maxxtzb: false,\n      liqtoken: ''\n    },\n    redeemer : {\n      coin: '',\n      liqtoken: '',\n      max: false,\n      amount: '',\n      xtzamount: '',\n    }\n  });\n  const isReady = () => {\n    return !(dexState.token === []);\n  }\n  const loadLiquidity = () => {\n    Tezos.contract.at(dexContract)\n      .then(c => {\n        return c.storage()\n      .then (s => {\n        var liquidity = {};\n        s.liquidity.forEach((l,k,m) => {\n          /* k = {0: 'XPA', 1: 'tz1Lc2qBKEWCBeDU8npG6zCeCqpmaegRi6Jg'} */\n          if (k[1] === account) {\n            liquidity[k[0]] = l.toString()\n          }\n        });\n        console.log('loaded liquidity:', liquidity);\n        setDexState(state => { return {\n          ...state,\n          liquidity: liquidity,\n        }})\n      })})\n      .catch(error => console.log(`Error: ${JSON.stringify(error, null, 2)}`));\n  }\n  const loadDexTokens = () => {\n    Tezos.contract.at(dexContract)\n      .then(c => {\n        return c.storage()\n      .then (s => {\n        var token = {};\n        s.token.forEach((l,k,m) => {\n          token[k] = {\n            addr: l.addr,\n            name: l.name,\n            iconurl: l.iconurl,\n            poolvalue: l.poolvalue.toString(),\n            totalqty: l.totalqty.toString(),\n            totallqt: l.totallqt.toString()\n          }\n        });\n        console.log('loaded tokens:', token);\n        setDexState(state => {\n          return {\n            ...state,\n            token: token,\n        }})\n      })})\n      .catch(error => console.log(`Error: ${JSON.stringify(error, null, 2)}`));\n  }\n  /* compute amount of token B and fee when providing qA amount of token A */\n  const computeAmount = (aA,qA,qB,f) => {\n    const g = 1 - f;\n    return qB * g * aA / (qA + g * aA);\n  }\n  const computeFee = (aA,qA,qB,f) => {\n    const aB      = computeAmount(aA,qA,qB,f);\n    const aBnofee = computeAmount(aA,qA,qB,0);\n    const fee     = Math.ceil(aBnofee-aB);\n    return fee;\n  }\n  const computeTok2TokAmount = (aA,qA,qB,f,qTA,qTB) => {\n    const g = 1 - f;\n    const alpha = qTB / (qTA * g * g);\n    return qB * aA / (alpha * qA + aA * (1 + alpha * g));\n  }\n  const computeTok2TokFee = (aA,qA,qB,f,qTA,qTB) => {\n    const aB      = computeTok2TokAmount(aA,qA,qB,f,qTA,qTB);\n    const aBnofee = computeTok2TokAmount(aA,qA,qB,0,qTA,qTB);\n    const fee     = Math.ceil(aBnofee-aB);\n    return fee;\n  }\n  const computeAmounts = (state) => {\n    if (state.left.coin !== '' && state.left.amount !== '' && state.right.coin !== '') {\n      var [ tA, aA, qA, tB, qB ] = [ state.left.coin, parseFloat(state.left.amount), 0, state.right.coin, 0 ];\n      var aB = 0;\n      var aF = 0;\n      if (tA === 'XTZ') {\n        aA = aA * 1000000;\n        qA = parseInt(state.token[tB].poolvalue);\n        qB = parseInt(state.token[tB].totalqty);\n        aB = Math.floor(computeAmount(aA,qA,qB,fee));\n        aF = computeFee(aA,qA,qB,fee);\n      } else if (tB === 'XTZ') {\n        qA = parseInt(state.token[tA].totalqty);\n        qB = parseInt(state.token[tA].poolvalue);\n        aB = Math.floor(computeAmount(aA,qA,qB,fee));\n        aF = computeFee(aA,qA,qB,fee);\n      } else {\n        qA   = parseInt(state.token[tA].totalqty);\n        const qTA  = parseInt(state.token[tA].poolvalue);\n        const qTB  = parseInt(state.token[tB].poolvalue);\n        qB   = parseInt(state.token[tB].totalqty);\n        aB   = Math.floor(computeTok2TokAmount(aA,qA,qB,fee,qTA,qTB));\n        aF   = computeTok2TokFee(aA,qA,qB,fee,qTA,qTB);\n      };\n      console.log(`aB: ${aB}`);\n      console.log(`aF: ${aF}`);\n      return {\n        ...state,\n        right: { coin: state.right.coin, amount : aB, fee : aF },\n      }\n    }\n    else return state;\n  };\n  const isPoolEmpty = (coin) => {\n    if (coin !== '') {\n      const totalqty = dexState.token[coin].totalqty;\n      const poolvalue = dexState.token[coin].poolvalue;\n      return totalqty === '0' && poolvalue === '0';\n    } else {\n      return true;\n    }\n  };\n  const computeMintedLQT = (state) => {\n    if (isPoolEmpty(state.provider.coin)) {\n      var xlq = 0;\n      if (state.provider.amount !== '' && state.provider.xtzamount !== '') {\n        xlq = 1000000;\n      };\n      return {\n        ...state,\n        provider: {\n          coin:   state.provider.coin,\n          amount: state.provider.amount,\n          maxb:   state.provider.maxb,\n          xtzamount: state.provider.xtzamount,\n          maxxtzb: state.provider.maxxtzb,\n          liqtoken: xlq\n        },\n      }\n    } else {\n      var tA = '';\n      var aA = 0;\n      var qA = 0;\n      var tB = '';\n      var qB = 0;\n      var aB = 0;\n      if (state.provider.amount !== '') {\n        tA = state.provider.coin;\n        aA = state.provider.amount;\n        qA = parseInt(state.token[tA].totalqty);\n        qB = parseInt(state.token[tA].poolvalue);\n        aB = new Intl.NumberFormat('en-IN', { maximumSignificantDigits: 6 }).format(computeAmount(aA, qA, qB, 0) / 1000000);\n        const xlq = Math.floor(state.token[tA].totallqt * aB * 1000000 / state.token[tA].poolvalue);\n        return {\n          ...state,\n          provider: {\n            coin:   state.provider.coin,\n            amount: state.provider.amount,\n            maxb:   state.provider.maxb,\n            xtzamount: aB,\n            maxxtzb: state.provider.maxxtzb,\n            liqtoken: xlq\n          },\n        }\n      } else if (state.provider.xtzamount !== '') {\n        tB = state.provider.coin;\n        aA = parseFloat(state.provider.xtzamount) * 1000000;\n        console.log(`aA: ${aA}`);\n        console.log(`xtzamount: ${state.provider.xtzamount}`);\n        qA = parseInt(state.token[tB].poolvalue);\n        qB = parseInt(state.token[tB].totalqty);\n        aB = Math.floor(computeAmount(aA,qA,qB,0));\n        const xlq = Math.floor(state.token[tB].totallqt * parseInt(state.provider.xtzamount) / state.token[tB].poolvalue);\n        return {\n          ...state,\n          provider: {\n            coin:   state.provider.coin,\n            amount: aB,\n            maxb:   state.provider.maxb,\n            xtzamount: state.provider.xtzamount,\n            maxxtzb: state.provider.maxxtzb,\n            liqtoken: xlq\n          },\n        }\n      } else {\n        return state;\n      };\n    }\n  };\n  const computeRedeemedLQT = (state) => {\n    const liqamount = state.redeemer.liqtoken;\n    const coin = state.redeemer.coin;\n    if (liqamount !== '' && coin !== '') {\n      const poolvalue = state.token[coin].poolvalue;\n      const totalqty = state.token[coin].totalqty;\n      const totallqt = state.token[coin].totallqt;\n      const ratio = liqamount / totallqt;\n      const amount    = Math.floor(ratio * totalqty);\n      const xtzamount = new Intl.NumberFormat({ maximumSignificantDigits: 6 }).format(ratio * poolvalue / 1000000);\n      return {\n        ...state,\n        redeemer: {\n          coin: state.redeemer.coin,\n          liqtoken: liqamount,\n          max: state.redeemer.max,\n          amount: amount,\n          xtzamount: xtzamount,\n        },\n      }\n    } else {\n      return state;\n    }\n  };\n  const getXTZFor = (city,qty) => {\n    var srctotalqty = dexState.token[city].totalqty;\n    var dsttotalqty = dexState.token[city].poolvalue;\n    return computeAmount(1000000,srctotalqty,dsttotalqty,fee) / 1000000;\n  }\n  const forceRetrieveTokenBalance = (coin) => {\n    const address = dexState.token[coin].addr;\n      Tezos.contract.at(address)\n      .then( myContract => {\n        return myContract.storage()\n      .then ( myStorage => {\n        //When called on a map, the get method returns the value directly\n        myStorage['ledger'].get(account).then(value => {\n          setDexState(state => {\n            var balances = state.balances;\n            console.log(`value: ${value.toString()}`);\n            balances[coin] = value.toString();\n            return {\n              ...state,\n              balances : balances,\n            }\n          });\n        });\n      })})\n      .catch(error => console.log(`Error: ${JSON.stringify(error, null, 2)}`));\n  }\n  const retrieveTokenBalance = (coin) => {\n    if (ready && coin !== '' && coin !== 'XTZ' && !(coin in dexState.balances)) {\n      forceRetrieveTokenBalance(coin);\n    }\n  }\n  const setLeftCoin = (coin) => { setDexState(state => {\n    return computeAmounts({\n      ...state,\n      left: { coin: coin, amount : '', max: false },\n      right: { coin: state.right.coin, amount : '', fee : '' },\n    })});\n    retrieveTokenBalance(coin);\n  };\n  const setRightCoin = (coin) => { setDexState(state => {\n    return computeAmounts({\n      ...state,\n      right : { coin: coin, amount : '', fee : '' },\n    })});\n    retrieveTokenBalance(coin);\n  };\n  const resetDexCoins = () => {\n    setDexState(state => {\n      return {\n        ...state,\n        left: { ...state.left, amount : '', max: false },\n        right : { ...state.right, amount : '', fee : '' },\n      }\n    });\n  }\n  const resetProvider = () => {\n    setDexState(state => {\n      return {\n        ...state,\n        provider : {\n          ...state.provider,\n          amount: '',\n          maxb: false,\n          xtzamount: '',\n          maxxtzb: false,\n          liqtoken: ''\n        },\n      }\n    });\n  }\n  const resetRedeemer = () => {\n    setDexState(state => {\n      return {\n        ...state,\n        redeemer : {\n          ...state.redeemer,\n          amount: '',\n          xtzamount: '',\n          liqtoken: '',\n          max: false,\n          maxxtzb: false,\n        },\n      }\n    });\n  }\n  const setLeftAmount = (amount) => {\n    if (isNaN(amount)) {\n      setDexState(state => {\n        return {\n          ...state,\n          left : { coin: state.left.coin, amount : '', max: state.left.max },\n          right : { coin: state.right.coin, amount : '', fee : '' },\n      }})\n    } else {\n      setDexState (state => {\n        return computeAmounts({\n          ...state,\n          left : { coin: state.left.coin, amount : (parseFloat(amount)>0)?amount:'0', max: state.left.max },\n          right : { coin: state.right.coin, amount : '', fee : '' },\n      })})};\n    }\n  const switchMax = (balance) => { setDexState (state => {\n    return computeAmounts({\n      ...state,\n      left : { coin: state.left.coin, amount : state.left.max?'':balance, max: !(state.left.max) },\n      right : { coin: state.right.coin, amount : '', fee : '' },\n  })})};\n  const setProviderCoin = (coin) => {\n    setDexState(state => {\n      return {\n        ...state,\n        provider: {\n          coin: coin,\n          amount: '',\n          maxb: false,\n          xtzamount: '',\n          maxxtzb: false,\n          liqtoken: ''\n        }\n      }\n    });\n    retrieveTokenBalance(coin);\n  };\n  const setProviderAmount = (a) => { setDexState(state => {\n    return computeMintedLQT({  /* todo compute xtzbalance and liqtoken */\n      ...state,\n      provider: {\n        coin: state.provider.coin,\n        amount: Math.max(0,a),\n        maxb: false,\n        xtzamount: (isPoolEmpty(state.provider.coin)?state.provider.xtzamount:''),\n        maxxtzb: false,\n        liqtoken: ''\n      },\n  })})};\n  const setProviderXTZAmount = (a) => {\n    if(isNaN(parseFloat(a)) || a.charAt(a.length - 1) === '.') {\n      setDexState(state => {\n        return {\n          ...state,\n          provider: {\n            coin: state.provider.coin,\n            amount: (isPoolEmpty(state.provider.coin)?state.provider.amount:''),\n            maxb: false,\n            xtzamount: a,\n            maxxtzb: false,\n            liqtoken: ''\n          }\n      }});\n    } else {\n      setDexState(state => {\n        return computeMintedLQT({\n          ...state,\n          provider: {\n            coin: state.provider.coin,\n            amount: (isPoolEmpty(state.provider.coin)?state.provider.amount:''),\n            maxb: false,\n            xtzamount: (parseFloat(a)>0?a:'0'),\n            maxxtzb: false,\n            liqtoken: ''\n          }\n    })})};\n  }\n  const switchProviderMax = (balance) => { setDexState (state => {\n    return computeMintedLQT({\n      ...state,\n      provider: {\n        coin: state.provider.coin,\n        amount : state.provider.maxb?'':balance,\n        maxb: !state.provider.maxb,\n        xtzamount: '',\n        maxxtzb: false,\n        liqtoken: ''\n      },\n  })})};\n  const switchProviderXTZMax = (balance) => { setDexState (state => {\n    return computeMintedLQT({\n      ...state,\n      provider: {\n        coin: state.provider.coin,\n        amount : '',\n        maxb: false,\n        xtzamount: state.provider.maxxtzb?'':balance,\n        maxxtzb: !state.provider.maxxtzb,\n        liqtoken: ''\n      },\n  })})};\n  const setRedeemerCoin = (coin) => {\n    setDexState(state => {\n      return {\n        ...state,\n        redeemer: {\n          coin: coin,\n          max: false,\n          liqtoken: '',\n          amount: '',\n          xtzamount: '',\n        }\n    }});\n    retrieveTokenBalance(coin);\n  };\n  const setRedeemerMax = (balance) => {setDexState(state => {\n    return computeRedeemedLQT({\n      ...state,\n      redeemer: {\n        coin: state.redeemer.coin,\n        max: !state.redeemer.max,\n        liqtoken: state.redeemer.max?'':balance,\n        amount: '',\n        xtzamount: '',\n      }\n  })})};\n  const setRedeemerAmount = (value) => {setDexState(state => {\n    return computeRedeemedLQT({\n      ...state,\n      redeemer: {\n        coin: state.redeemer.coin,\n        max: state.redeemer.max,\n        liqtoken: Math.max(0,value),\n        amount: '',\n        xtzamount: '',\n      }\n  })})};\n  const setBalance = (value) => {setDexState(state => {\n    return {\n      ...state,\n      balance : value,\n  }})};\n  return { dexState, setDexState,\n    setBalance, isReady, loadDexTokens, loadLiquidity, forceRetrieveTokenBalance,\n    resetDexCoins, resetProvider, resetRedeemer,\n    getXTZFor, setLeftCoin, setRightCoin, setLeftAmount, switchMax,\n    setProviderCoin, setProviderAmount, setProviderXTZAmount, switchProviderMax, switchProviderXTZMax,\n    setRedeemerCoin, setRedeemerMax, setRedeemerAmount };\n}\n\nexport const [ DexProvider, useDexStateContext ] = constate(useDexState);","import React from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport '../index.css';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport Button from '@material-ui/core/Button';\nimport Link from '@material-ui/core/Link';\nimport Grid from '@material-ui/core/Grid';\nimport { useReady, useWallet } from '../dapp';\n\nconst HeaderBar = (props) => {\n  const ready = useReady();\n  const wallet = useWallet();\n  const minWidth = useMediaQuery('(min-width:600px)');\n  var visible = minWidth?'visible':'hidden';\n  var dark = props.theme.palette.type === 'dark';\n  return (\n    <AppBar position=\"static\" color={dark?\"default\":\"secondary\"} style={{\n      boxShadow: \"none\",\n      opacity: 1,\n    }}>\n      <Toolbar>\n        <Typography variant=\"h6\" style={{ color: 'white', position: 'absolute', fontFamily : 'Alegreya Sans SC, sans-serif' }}>\n          Completium\n        </Typography>\n        <Grid container justify=\"center\" alignItems=\"center\">\n          <Grid item>\n            <Typography variant=\"h6\" style={{\n              visibility: visible,\n              textAlign: 'center',\n              color: 'white'\n              }}>\n              {props.appTitle}\n            </Typography>\n          </Grid>\n        </Grid>\n        { ready? (\n            <div></div>\n          ): (wallet? (\n            <Button variant=\"contained\" color=\"secondary\"\n              disableElevation\n              size=\"small\"\n              style={{ position: 'absolute', right: '1%' }}\n              onClick={props.handleConnect}>\n              connect to wallet\n            </Button>\n          ):(\n            <Link href=\"https://thanoswallet.com/\" rel=\"noopener\" underline=\"none\" style={{\n              position: 'absolute',\n              right: '1%'\n            }}>\n              <Button variant=\"contained\" size=\"small\" disableElevation\n                style={{\n                  backgroundColor: '#ed8936',\n                  color: 'white',\n                  fontWeight: 'bold',\n                   }}>\n                Install Thanos\n              </Button>\n            </Link>\n          ))}\n      </Toolbar>\n    </AppBar>\n  )\n}\n\nexport default HeaderBar","\nimport React from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nconst SnackMsg = (props) => {\n    return (\n      <Snackbar open={props.open} >\n        <Alert severity=\"info\" style={{\n            backgroundColor: props.theme.palette.secondary.main\n        }}>\n          Waiting for operation confirmation ...\n        </Alert>\n      </Snackbar>)\n}\n\nexport default SnackMsg","import { useTheme } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport { useDexStateContext } from '../dexstate';\nimport { getCityName } from '../settings';\n\nconst CoinItem = (props) => {\n  const { dexState, getXTZFor } = useDexStateContext();\n  const theme = useTheme();\n  const icon = (props.name === 'XTZ')?(\n    process.env.PUBLIC_URL + \"/icons/\" + 'tezos_' + ((theme.palette.type === 'dark')?'white':'black') + '.svg'\n  ):(\n    dexState.token[props.name].iconurl\n  );\n  const name = (props.name === 'XTZ')?(\n    'Tezos'\n  ):(\n    dexState.token[props.name].name\n  );\n  return (\n    <Grid container direction='row' justify=\"flex-start\" alignItems=\"center\" spacing={0}>\n      <Grid item xs={1}>\n      <img src={icon} style={{ height: '35px', width: '35px' }}></img>\n      </Grid>\n      <Grid item xs={2} style={{ paddingLeft: (props.show)?'12px':'24px' }}>\n        <Typography style={{ textTransform: 'uppercase' }}>{props.name}</Typography>\n      </Grid>\n      <Grid item xs={3} style={{ paddingLeft: (props.show)?'0px':'24px' }}>\n        <Typography color='textSecondary'>{name}</Typography>\n      </Grid>\n      { (props.name !== 'XTZ' && props.show)? (\n        <Grid item xs={6} style={{ textAlign: 'right' }}>\n          <Typography color='textSecondary'>({\n            new Intl.NumberFormat('en-IN',{maximumFractionDigits : 6}).format(getXTZFor(props.name,1)) + ' XTZ'\n          })</Typography>\n        </Grid>\n      ) : (\n        <Grid item></Grid>\n      ) }\n    </Grid>\n  );\n}\n\n  export default CoinItem;","import { useTheme } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Divider from '@material-ui/core/Divider';\nimport ArrowRightAltIcon from '@material-ui/icons/ArrowRightAlt';\n\nconst VerticialDivider = (props) => {\n    const theme = useTheme();\n    return (\n      <Grid container direction='column' justify=\"center\" alignItems=\"center\" style={{ height: '350px' }}>\n        <Grid item xs={5}>\n          <Divider orientation=\"vertical\" flexItem style={{ height: '100%' }}></Divider>\n        </Grid>\n        <Grid item>\n          <div color='disabled' style= {{\n            borderStyle: 'solid',\n            borderWidth: '1px',\n            borderRadius: '90px',\n            height: '31px',\n            width: '31px',\n            borderColor : theme.palette.divider,\n          }}>\n            <ArrowRightAltIcon style={{\n              position : 'relative',\n              top : '3px'\n            }} color=\"secondary\"/>\n          </div>\n        </Grid>\n        <Grid item xs={5}>\n          <Divider orientation=\"vertical\" flexItem style={{ height: '100%' }} ></Divider>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  export default VerticialDivider;","import { useState } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport Divider from '@material-ui/core/Divider';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useDexStateContext } from '../dexstate';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\nimport CoinItem from './CoinItem';\nimport VerticialDivider from './VerticalDivider';\nimport { useTezos, useAccountPkh } from '../dapp';\nimport { dexContract, network } from '../settings';\nimport { OpKind, TezosToolkit } from '@taquito/taquito';\n\nconst Tezos = new TezosToolkit('https://'+network+'-tezos.giganode.io');\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: '100%',\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst getBalanceFor = (dexState, coin) => {\n  if (coin in dexState.balances) {\n    return dexState.balances[coin];\n  } else {\n    return '';\n  }\n}\n\nconst LeftEx = (props) => {\n  const { dexState, setLeftCoin, setLeftAmount, switchMax } = useDexStateContext();\n  const xtzbalance = dexState.balance;\n  const classes = useStyles();\n  const coin = dexState.left.coin;\n  const balance = (coin === 'XTZ')?xtzbalance:getBalanceFor(dexState,coin);\n  const handleChange = (event) => {\n    setLeftCoin(event.target.value);\n  };\n  const handleCheckChange = (event) => {\n    switchMax(balance);\n  }\n  const handleAmountChange = (event) => {\n    setLeftAmount(event.target.value);\n  }\n  const cities = ['XTZ'].concat(Object.keys(dexState.token)).filter(c => { return (c === 'XTZ' || dexState.token[c].totalqty > 0)});\n  return (\n    <Grid container direction='row' spacing={4} style={{ paddingLeft: '24px' }}>\n      <Grid item xs={12}>\n        <Typography style={{ fontWeight: 'bold', paddingLeft: '12px', paddingTop: '24px' }} >From</Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <FormControl variant=\"outlined\" className={classes.formControl}>\n          <InputLabel color='secondary' id=\"demo-simple-select-outlined-label\">Crypto asset</InputLabel>\n          <Select\n            color='secondary'\n            labelId=\"demo-simple-select-outlined-label\"\n            id=\"demo-simple-select-outlined\"\n            value={coin}\n            onChange={handleChange}\n            label=\"Crypto asset\"\n            labelWidth='200'\n          >\n            <MenuItem value=\"\">\n              <em>None</em>\n            </MenuItem>\n            { cities.filter(city => city !== dexState.right.coin).map(city =>\n              <MenuItem value={city}><CoinItem name={city} show={true}/></MenuItem>\n            )}\n          </Select>\n        </FormControl>\n      </Grid>\n      <Grid item xs={12} style={{ paddingBottom: 0 }}>\n        <Grid container direction='row' alignItems=\"center\">\n          <Grid item xs={10}>\n            <Typography color='textSecondary' style={{ paddingLeft: '12px' }}>Balance: {balance} {coin}</Typography>\n          </Grid>\n          <Grid item xs={1}>\n            <Typography>Max</Typography>\n          </Grid>\n          <Grid item xs={1} style={{ textAlign: 'right' }}>\n            <Switch\n              checked={dexState.left.max}\n              onChange={handleCheckChange}\n              color=\"secondary\"\n              name=\"max\"\n              disabled={ balance === '0' }\n            />\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid item xs={12} style={{ paddingTop: 0 }}>\n        <TextField InputProps={{\n            readOnly: dexState.left.max,\n          }}\n          onChange={handleAmountChange}\n          value={dexState.left.amount}\n          disabled={ balance === '0' } type={(coin === 'XTZ')?\"text\":\"number\"} color='secondary' className={classes.formControl}\n          id=\"outlined-basic\"\n          label=\"Amount\"\n          variant=\"outlined\"\n          error={parseInt(dexState.left.amount) > parseInt(balance)}\n          helperText={parseInt(dexState.left.amount) > parseInt(balance)?'Cannot spend more than balance':''}\n        />\n      </Grid>\n    </Grid>\n  )\n}\n\nconst RightEx = (props) => {\n  const { dexState, setRightCoin } = useDexStateContext();\n  const classes = useStyles();\n  const handleChange = (event) => {\n    setRightCoin(event.target.value);\n  };\n  const coin = dexState.right.coin;\n  const sent = (coin === 'XTZ')?parseInt(dexState.right.amount)/1000000:dexState.right.amount;\n  var exbalance = 0;\n  if (coin !== '') {\n    if (coin === 'XTZ') {\n      exbalance = dexState.token[dexState.left.coin].poolvalue / 1000000;\n    } else {\n      exbalance = dexState.token[coin].totalqty;\n    }\n  };\n  var balance = '';\n  if (coin !== '') {\n    if (coin === 'XTZ') {\n      balance = dexState.balance;\n    } else {\n      balance = getBalanceFor(dexState,coin);\n    }\n  }\n  var fee = (coin === 'XTZ' && dexState.right.fee !== '')?parseInt(dexState.right.fee)/1000000:dexState.right.fee;\n  const cities = ['XTZ'].concat(Object.keys(dexState.token)).filter(c => {return (c === 'XTZ' || dexState.token[c].totalqty > 0)});\n  return (\n    <Grid container direction='row' spacing={4} style={{ paddingRight: '24px' }}>\n      <Grid item xs={12}>\n        <Typography style={{ fontWeight: 'bold', paddingTop: '24px' }} >To</Typography>\n      </Grid>\n      <Grid item xs={12} style={{ paddingLeft: 0, paddingRight: '34px', paddingBottom: 0 }}>\n        <FormControl variant=\"outlined\" className={classes.formControl} style={{ paddingLeft: 0 }}>\n          <InputLabel color='secondary' id=\"demo-simple-select-outlined-label\">Crypto asset</InputLabel>\n          <Select\n            color='secondary'\n            labelId=\"demo-simple-select-outlined-label\"\n            id=\"demo-simple-select-outlined\"\n            value={coin}\n            onChange={handleChange}\n            label=\"Crypto asset\"\n            labelWidth='200'\n          >\n            <MenuItem value=\"\">\n              <em>None</em>\n            </MenuItem>\n            { cities.filter(city => city !== dexState.left.coin).map(city =>\n              <MenuItem value={city}><CoinItem name={city} show={true}/></MenuItem>\n            )}\n          </Select>\n        </FormControl>\n      </Grid>\n      <Grid item xs={12} style={{ paddingTop: 0, paddingBottom: 20 }}>\n        <Typography color='textSecondary' variant='caption'>Exchange balance: {exbalance} {coin}</Typography>\n      </Grid>\n      <Grid item xs={6} style={{ paddingBottom: '6px', paddingTop: '0px'}}>\n      <Typography color='textSecondary' style={{ paddingLeft: '0' }}>Balance: {balance} {coin}</Typography>\n      </Grid>\n      <Grid item xs={6} style={{ paddingBottom: '6px', paddingTop: '0px'}}>\n      <Typography color='textSecondary' style={{ paddingLeft: '0' }}>Fee: {fee} {coin}</Typography>\n      </Grid>\n      <Grid item xs={12} style={{ paddingTop: 0, paddingLeft: 0, paddingRight: '34px' }}>\n        <TextField InputProps={{\n            readOnly: true,\n          }}\n          value={sent}\n          type=\"number\"\n          color='secondary'\n          className={classes.formControl}\n          id=\"outlined-basic\"\n          label=\"Received amount\"\n          variant=\"outlined\"\n          error={parseInt(sent) > parseInt(exbalance)/2}\n          helperText={parseInt(sent) > parseInt(exbalance)/2?'Cannot exceed 50% of exchange balance':''} />\n      </Grid>\n    </Grid>\n  )\n}\n\nconst Exchange = (props) => {\n  const [initialized, setInititialized] = useState(false);\n  const { dexState, loadDexTokens, resetDexCoins, forceRetrieveTokenBalance, setBalance } = useDexStateContext();\n  const tezos = useTezos();\n  const account = useAccountPkh();\n  const cannotExchange = () => {\n    const lcoin = dexState.left.coin;\n    const rcoin = dexState.right.coin;\n    if (lcoin === '' || rcoin === '') {\n      return true;\n    } else {\n      const lbalance = dexState.balances[lcoin];\n      const rbalance = (rcoin === 'XTZ')?dexState.token[lcoin].poolvalue:dexState.token[rcoin].totalqty;\n      const sent = (rcoin === 'XTZ')?parseInt(dexState.right.amount)/1000000:dexState.right.amount;\n      return (\n        dexState.right.amount === '' ||\n        parseInt(sent) > parseInt(rbalance)/2 ||\n        parseInt(dexState.left.amount) > parseInt(lbalance)\n      );\n    }\n  }\n  if (!initialized) {\n    loadDexTokens();\n    setInititialized(true);\n  }\n  async function handleExchange() {\n    const lcoin = dexState.left.coin;\n    const rcoin = dexState.right.coin;\n    const dex = await tezos.wallet.at(dexContract);\n    if (lcoin === 'XTZ') {\n      /* one transaction to dex */\n      const dex = await tezos.wallet.at(dexContract);\n      const op = await dex.methods.exchange(\n        dexState.left.coin,\n        dexState.left.amount * 1000000,\n        dexState.right.coin,\n        dexState.right.amount).send({ amount: dexState.left.amount });\n      props.openSnack();\n      resetDexCoins();\n      op.receipt().then(() => {\n        props.closeSnack();\n        loadDexTokens();\n        forceRetrieveTokenBalance(rcoin);\n        Tezos.tz\n        .getBalance(account)\n        .then((balance) => { setBalance(balance / 1000000) })\n        .catch((error) => console.log(JSON.stringify(error)));\n      })\n    } else {\n      const fa12 = await tezos.wallet.at(dexState.token[lcoin].addr);\n      const fa12params = fa12.methods.approve(dexContract,dexState.left.amount).toTransferParams();\n      fa12params.kind = OpKind.TRANSACTION;\n      const dexparams = dex.methods.exchange(\n        dexState.left.coin,\n        dexState.left.amount,\n        dexState.right.coin,\n        dexState.right.amount).toTransferParams();\n      dexparams.kind = OpKind.TRANSACTION;\n      const batch = await tezos.wallet.batch([fa12params, dexparams]);\n      const op = await batch.send();\n      props.openSnack();\n      resetDexCoins();\n      op.receipt().then(() => {\n        props.closeSnack();\n        loadDexTokens();\n        forceRetrieveTokenBalance(lcoin);\n        if (rcoin != 'XTZ') {\n          forceRetrieveTokenBalance(rcoin);\n        }\n        Tezos.tz\n        .getBalance(account)\n        .then((balance) => { setBalance(balance / 1000000) })\n        .catch((error) => console.log(JSON.stringify(error)));\n      })\n    }\n  }\n  return (\n    <Paper style={{ marginTop: '8px', minWidth: '1000px' }}>\n      <Grid container direction='row' spacing={2} alignItems=\"center\">\n        <Grid item xs={12}>\n          <Grid container direction='row' style={{ width: '100%' }}>\n            <Grid item style={{ width: '45%' }}>\n              <LeftEx/>\n            </Grid>\n            <Grid item style={{ textAlign: '-webkit-center', width: '10%' }}>\n              <VerticialDivider></VerticialDivider>\n            </Grid>\n            <Grid item style={{ width: '45%' }}>\n              <RightEx/>\n            </Grid>\n          </Grid>\n        </Grid>\n        <Grid item xs={12}>\n          <Divider></Divider>\n        </Grid>\n        <Grid item xs={12} style={{ textAlign: 'right', paddingRight : 24, paddingBottom : 16 }}>\n          <Button onClick={handleExchange} disabled={cannotExchange()} variant='contained' color='secondary' disableElevation>exchange</Button>\n        </Grid>\n      </Grid>\n    </Paper>\n  )\n}\n\nexport default Exchange;","import Grid from '@material-ui/core/Grid';\nimport Divider from '@material-ui/core/Divider';\nimport AddIcon from '@material-ui/icons/Add';\nimport { useTheme } from '@material-ui/core/styles';\n\nconst PlusDivider = (props) => {\n  const theme = useTheme();\n  return (\n    <Grid container direction='row' justify=\"center\" alignItems=\"center\" style={{ marginLeft: '8px' }}>\n      <Grid item style={{ width: '45%' }}>\n        <Divider></Divider>\n      </Grid>\n      <Grid item>\n        <div color='disabled' style= {{\n          borderStyle: 'solid',\n          borderWidth: '1px',\n          borderRadius: '90px',\n          height: '31px',\n          width: '31px',\n          borderColor : theme.palette.divider,\n        }}>\n          <AddIcon style={{\n            position : 'relative',\n            top : '3px',\n            left : '3px'\n          }} color=\"secondary\"/>\n        </div>\n      </Grid>\n      <Grid item style={{ width: '45%' }}>\n        <Divider></Divider>\n      </Grid>\n    </Grid>\n  );\n}\n\nexport default PlusDivider;","import { useState } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport Divider from '@material-ui/core/Divider';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useDexStateContext } from '../dexstate';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\nimport CoinItem from './CoinItem';\nimport VerticialDivider from './VerticalDivider';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport { useTheme } from '@material-ui/core/styles';\nimport PlusDivider from './PlusDivider';\nimport { useTezos, useAccountPkh } from '../dapp.js';\nimport { dexContract, network } from '../settings';\nimport { OpKind, TezosToolkit } from '@taquito/taquito';\n\nconst Tezos = new TezosToolkit('https://'+network+'-tezos.giganode.io');\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: '100%',\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst getBalanceFor = (dexState, coin) => {\n  if (coin in dexState.balances) {\n    return dexState.balances[coin];\n  } else {\n    return '';\n  }\n}\n\nconst LeftEx = (props) => {\n  const { dexState, setProviderAmount, setProviderXTZAmount, switchProviderMax, switchProviderXTZMax, isPoolEmpty } = useDexStateContext();\n  const theme = useTheme();\n  const svg = 'tezos' + '_' + ((theme.palette.type === 'dark')?'white':'black') + '.svg';\n  const classes = useStyles();\n  const coin = dexState.provider.coin;\n  const balance = getBalanceFor(dexState,coin);\n  const xtzbalance = dexState.balance;\n  const handleMaxChange = (event) => {\n    switchProviderMax(balance);\n  }\n  const handleMaxXTZChange = (event) => {\n    switchProviderXTZMax(xtzbalance);\n  }\n  const handleAmountChange = (event) => {\n    setProviderAmount(event.target.value);\n  }\n  const handleXTZAmountChange = (event) => {\n    setProviderXTZAmount(event.target.value);\n  }\n  const errorAmount = parseInt(dexState.provider.amount) > ((coin !== '')?parseInt(balance):0);\n  return (\n    <Grid container direction='row' spacing={4} style={{ paddingLeft: '24px' }}>\n      <Grid item xs={12} style={{ paddingBottom: 0, marginTop: '16px' }}>\n        <Grid container direction='row' alignItems=\"center\">\n          <Grid item xs={10}>\n            <Typography color='textSecondary' style={{ paddingLeft: '12px' }}>Balance: {balance} {coin}</Typography>\n          </Grid>\n          <Grid item xs={1}>\n            <Typography>Max</Typography>\n          </Grid>\n          <Grid item xs={1} style={{ textAlign: 'right' }}>\n            <Switch\n              disabled={coin === ''}\n              checked={dexState.provider.maxb}\n              onChange={handleMaxChange}\n              color=\"secondary\"\n              name=\"max\"\n            />\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid item xs={12}  style={{ paddingTop: 0 }}>\n        <TextField InputProps={{\n            readOnly: dexState.provider.maxb,\n          }}\n          value={dexState.provider.amount}\n          onChange={handleAmountChange}\n          type=\"number\" color='secondary' className={classes.formControl}\n          id=\"outlined-basic\"\n          label=\"Amount\"\n          variant=\"outlined\"\n          error={errorAmount}\n          disabled={coin === ''}\n          helperText={errorAmount?'Cannot spend more than balance':''}\n        />\n      </Grid>\n      <Grid item xs={12}>\n        <PlusDivider />\n      </Grid>\n      <Grid item xs={12} style={{ paddingBottom: 0 }}>\n        <Grid container direction='row' alignItems=\"center\">\n          <Grid item xs={10}>\n            <Typography color='textSecondary' style={{ paddingLeft: '12px' }}>Balance: {xtzbalance} XTZ</Typography>\n          </Grid>\n          <Grid item xs={1}>\n            <Typography>Max</Typography>\n          </Grid>\n          <Grid item xs={1} style={{ textAlign: 'right' }}>\n            <Switch\n              checked={dexState.provider.maxxtzb}\n              onChange={handleMaxXTZChange}\n              color=\"secondary\"\n              name=\"max\"\n              disabled={ balance === '0' }\n            />\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid item xs={12} style={{ paddingTop: 0 }}>\n        <TextField\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <img src={process.env.PUBLIC_URL + \"/icons/\" + svg} style={{ height: '35px', width: '35px' }}></img>\n              </InputAdornment>\n            ),\n            readOnly: dexState.provider.maxxtzb,\n          }}\n          onChange={handleXTZAmountChange}\n          on\n          value={dexState.provider.xtzamount}\n          disabled={ balance === '0' || coin ==='' } color='secondary' className={classes.formControl}\n          id=\"outlined-basic\"\n          label=\"Amount\"\n          variant=\"outlined\"\n          error={parseInt(dexState.left.amount) > parseInt(balance)}\n          helperText={parseInt(dexState.left.amount) > parseInt(balance)?'Cannot spend more than balance':''}\n        />\n      </Grid>\n    </Grid>\n  )\n}\n\nconst RightEx = (props) => {\n  const { dexState } = useDexStateContext();\n  const classes = useStyles();\n  const coin = dexState.provider.coin;\n  const balance = (coin in dexState.liquidity)?dexState.liquidity[coin]:0;\n  return (\n    <Grid container direction='row' alignItems=\"center\" spacing={4} style={{ paddingLeft: '0px', paddingRight: '44px', marginTop: '0px' }}>\n      <Grid item xs={12}>\n        <Typography style={{ fontWeight: 'bold', paddingLeft: '12px', paddingTop: '8px' }} >Liquidity Token</Typography>\n      </Grid>\n      <Grid item xs={12} style={{ paddingBottom: 0, marginTop: '36px' }}>\n        <Grid container direction='row' alignItems=\"center\">\n          <Grid item xs={10}>\n            <Typography color='textSecondary' style={{ paddingLeft: '12px' }}>Balance: {balance} LQT</Typography>\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid item xs={12}  style={{ paddingTop: 0 }}>\n      <TextField InputProps={{\n            readOnly: true,\n          }}\n          value={dexState.provider.liqtoken}\n          type=\"number\" color='secondary' className={classes.formControl}\n          id=\"outlined-basic\"\n          label=\"Received Amount\"\n          variant=\"outlined\"\n        />\n      </Grid>\n    </Grid>\n  )\n}\n\nconst Provider = (props) => {\n  const { dexState, setProviderCoin, loadDexTokens, loadLiquidity, setBalance, resetProvider } = useDexStateContext();\n  const classes = useStyles();\n  const tezos = useTezos();\n  const coin = dexState.provider.coin;\n  const handleChange = (event) => {\n    setProviderCoin(event.target.value);\n  };\n  const account = useAccountPkh();\n  const cities = Object.keys(dexState.token);\n  async function handleProvide() {\n    const fa12 = await tezos.wallet.at(dexState.token[coin].addr);\n    const dex = await tezos.wallet.at(dexContract);\n    const fa12params = fa12.methods.approve(dexContract,dexState.provider.amount).toTransferParams();\n    fa12params.kind = OpKind.TRANSACTION;\n    const dexparams = dex.methods.addLiquidity(coin,dexState.provider.amount).toTransferParams();\n    dexparams.kind = OpKind.TRANSACTION;\n    dexparams.amount = dexState.provider.xtzamount;\n    const batch = await tezos.wallet.batch([fa12params, dexparams]);\n    const op = await batch.send();\n    props.openSnack();\n    resetProvider();\n    op.receipt().then(() => {\n        props.closeSnack();\n        loadDexTokens();\n        loadLiquidity();\n        Tezos.tz\n        .getBalance(account)\n        .then((balance) => { setBalance(balance / 1000000) })\n        .catch((error) => console.log(JSON.stringify(error)));\n    })\n  };\n  return (\n    <Paper style={{ marginTop: '8px', minWidth: '1000px' }}>\n      <Grid container direction='row' spacing={2} alignItems=\"center\">\n        <Grid item xs={3} style={{ marginLeft: '24px', marginTop: '12px' }}>\n          <FormControl variant=\"outlined\" className={classes.formControl}>\n          <InputLabel color='secondary' id=\"demo-simple-select-outlined-label\">Crypto asset pool</InputLabel>\n          <Select\n            color='secondary'\n            labelId=\"demo-simple-select-outlined-label\"\n            id=\"demo-simple-select-outlined\"\n            value={coin}\n            onChange={handleChange}\n            label=\"Crypto asset pool\"\n            labelWidth='200'\n          >\n            <MenuItem value=\"\">\n              <em>None</em>\n            </MenuItem>\n            { cities.map(city =>\n              <MenuItem value={city}><CoinItem name={city} show={false}/></MenuItem>\n            )}\n          </Select>\n          </FormControl>\n        </Grid>\n        <Grid item xs={6} style={{ marginLeft: '24px', marginTop: '12px' }}>\n          <Paper variant=\"outlined\" disableElevation>\n            <Grid container direction='row' alignItems=\"center\" spacing={3} style={{ padding: '13px', paddingLeft: '34px' }}>\n              <Grid item xs={4}>\n                <Typography color='textSecondary'>Pool Token balance:</Typography>\n                <Typography> {(coin !== '')?dexState.token[coin].totalqty:''} {coin}</Typography>\n              </Grid>\n              <Grid item xs={4}>\n                <Typography color='textSecondary'>Pool XTZ balance:</Typography>\n                <Typography> {(coin !== '')?dexState.token[coin].poolvalue / 1000000 + ' XTZ':''}</Typography>\n              </Grid>\n              <Grid item xs={4}>\n                <Typography color='textSecondary'>Total Liquidity Tokens:</Typography>\n                <Typography> {(coin !== '')?dexState.token[coin].totallqt + ' LQT':''}</Typography>\n              </Grid>\n            </Grid>\n          </Paper>\n        </Grid>\n        <Grid item xs={12}>\n          <Grid container direction='row' style={{ width: '100%' }}>\n            <Grid item style={{ width: '45%' }}>\n              <LeftEx/>\n            </Grid>\n            <Grid item style={{ textAlign: '-webkit-center', width: '10%' }}>\n              <VerticialDivider></VerticialDivider>\n            </Grid>\n            <Grid item style={{ width: '45%' }}>\n              <RightEx/>\n          </Grid>\n        </Grid>\n      </Grid>\n        <Grid item xs={12}>\n          <Divider></Divider>\n        </Grid>\n        <Grid item xs={12} style={{ textAlign: 'right', paddingRight : 24, paddingBottom : 16 }}>\n          <Button onClick={handleProvide} disabled={dexState.provider.liqtoken === ''} variant='contained' color='secondary' disableElevation>provide liquidiy</Button>\n        </Grid>\n      </Grid>\n    </Paper>\n  )\n}\n\nexport default Provider;","import Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport Divider from '@material-ui/core/Divider';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useDexStateContext } from '../dexstate';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\nimport CoinItem from './CoinItem';\nimport VerticialDivider from './VerticalDivider';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport { useTheme } from '@material-ui/core/styles';\nimport PlusDivider from './PlusDivider';\nimport { TezosToolkit } from '@taquito/taquito';\nimport { network, dexContract } from '../settings';\nimport { useTezos, useAccountPkh, useReady } from '../dapp';\n\nconst Tezos = new TezosToolkit('https://'+network+'-tezos.giganode.io');\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: '100%',\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst getBalanceFor = (dexState, coin) => {\n  if (coin in dexState.balances) {\n    return dexState.balances[coin];\n  } else {\n    return '';\n  }\n}\n\nconst LeftEx = (props) => {\n  const { dexState } = useDexStateContext();\n  const theme = useTheme();\n  const svg = 'tezos' + '_' + ((theme.palette.type === 'dark')?'white':'black') + '.svg';\n  const classes = useStyles();\n  const coin = dexState.redeemer.coin;\n  const xtzbalance = dexState.balance;\n  const balance = getBalanceFor(dexState, coin);\n  const xtzamount = dexState.redeemer.xtzamount;\n  return (\n    <Grid container direction='row' spacing={4} style={{ paddingRight: '44px', marginTop: '2px' }}>\n      <Grid item xs={12} style={{ paddingBottom: 0, marginTop: '16px' }}>\n        <Grid container direction='row' alignItems=\"center\">\n          <Grid item xs={10}>\n            <Typography color='textSecondary' style={{ paddingLeft: '12px' }}>Balance: {balance} {coin}</Typography>\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid item xs={12}  style={{ paddingTop: 0 }}>\n      <TextField InputProps={{\n            readOnly: true,\n          }}\n          value={dexState.redeemer.amount}\n          type=\"number\" color='secondary' className={classes.formControl}\n          id=\"outlined-basic\"\n          label=\"Amount\"\n          variant=\"outlined\"\n        />\n      </Grid>\n      <Grid item xs={12}>\n        <PlusDivider />\n      </Grid>\n      <Grid item xs={12} style={{ paddingBottom: 0 }}>\n        <Grid container direction='row' alignItems=\"center\">\n          <Grid item xs={10}>\n            <Typography color='textSecondary' style={{ paddingLeft: '12px' }}>Balance: {xtzbalance} XTZ</Typography>\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid item xs={12} style={{ paddingTop: 0 }}>\n        <TextField\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <img src={process.env.PUBLIC_URL + \"/icons/\" + svg} style={{ height: '35px', width: '35px' }}></img>\n              </InputAdornment>\n            ),\n            readOnly: true,\n          }}\n          value={xtzamount}\n          disabled={ balance === '0' } color='secondary' className={classes.formControl}\n          id=\"outlined-basic\"\n          label=\"Amount\"\n          variant=\"outlined\"\n        />\n      </Grid>\n    </Grid>\n  )\n}\n\nconst RightEx = (props) => {\n  const { dexState, setRedeemerMax, setRedeemerAmount } = useDexStateContext();\n  const classes = useStyles();\n  const coin = dexState.redeemer.coin;\n  const balance = (coin in dexState.liquidity)?dexState.liquidity[coin]:0;\n  const handleMaxChange = (event) => {\n    setRedeemerMax(balance);\n  }\n  const handleChange = (event) => {\n    setRedeemerAmount(event.target.value);\n  }\n  return (\n    <Grid container direction='row' alignItems=\"center\" spacing={4} style={{ paddingLeft: '24px', paddingRight: '0px', marginTop: '0px' }}>\n      <Grid item xs={12}>\n        <Typography style={{ fontWeight: 'bold', paddingLeft: '12px', paddingTop: '8px' }} >Liquidity Token</Typography>\n      </Grid>\n      <Grid item xs={12} style={{ paddingBottom: 0, marginTop: '24px' }}>\n        <Grid container direction='row' alignItems=\"center\">\n          <Grid item xs={10}>\n            <Typography color='textSecondary' style={{ paddingLeft: '12px' }}>Balance: {balance} LQT</Typography>\n          </Grid>\n          <Grid item xs={1}>\n            <Typography>Max</Typography>\n          </Grid>\n          <Grid item xs={1} style={{ textAlign: 'right' }}>\n            <Switch\n              checked={dexState.redeemer.max}\n              onChange={handleMaxChange}\n              color=\"secondary\"\n              name=\"max\"\n              disabled={ balance === '0' }\n            />\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid item xs={12}  style={{ paddingTop: 0 }}>\n        <TextField\n          value={dexState.redeemer.liqtoken}\n          onChange={ handleChange }\n          type=\"number\" color='secondary' className={classes.formControl}\n          id=\"outlined-basic\"\n          label=\"LQT Amount\"\n          variant=\"outlined\"\n          error={dexState.redeemer.liqtoken > balance}\n          helperText={dexState.redeemer.liqtoken > balance?'Cannot redeem more than balance':''}\n          disabled={coin === ''}\n        />\n      </Grid>\n    </Grid>\n  )\n}\n\nconst Redeemer = (props) => {\n  const { dexState, setRedeemerCoin, resetRedeemer, loadDexTokens, loadLiquidity, setBalance } = useDexStateContext();\n  const classes = useStyles();\n  const account = useAccountPkh();\n  const tezos = useTezos();\n  const ready = useReady();\n  const coin = dexState.redeemer.coin;\n  const handleChange = (event) => {\n      setRedeemerCoin(event.target.value);\n  };\n  async function handleRedeem() {\n    const dex = await tezos.wallet.at(dexContract);\n    const op = await dex.methods.removeLiquidity(coin,dexState.redeemer.amount).send();\n    props.openSnack();\n    resetRedeemer();\n    op.receipt().then(() => {\n        props.closeSnack();\n        loadDexTokens();\n        loadLiquidity();\n        Tezos.tz\n        .getBalance(account)\n        .then((balance) => { setBalance(balance / 1000000) })\n        .catch((error) => console.log(JSON.stringify(error)));\n    })\n  };\n  const cities = Object.keys(dexState.token);\n  return (\n    <Paper style={{ marginTop: '8px', minWidth: '1000px' }}>\n      <Grid container direction='row' spacing={2} alignItems=\"center\">\n        <Grid item xs={3} style={{ marginLeft: '24px', marginTop: '12px' }}>\n          <FormControl variant=\"outlined\" className={classes.formControl}>\n          <InputLabel color='secondary' id=\"demo-simple-select-outlined-label\">Crypto asset pool</InputLabel>\n          <Select\n            color='secondary'\n            labelId=\"demo-simple-select-outlined-label\"\n            id=\"demo-simple-select-outlined\"\n            value={coin}\n            onChange={handleChange}\n            label=\"Crypto asset pool\"\n            labelWidth='200'\n          >\n            <MenuItem value=\"\">\n              <em>None</em>\n            </MenuItem>\n            { cities.map(city =>\n              <MenuItem value={city}><CoinItem name={city} show={false}/></MenuItem>\n            )}\n          </Select>\n          </FormControl>\n        </Grid>\n        <Grid item xs={6} style={{ marginLeft: '24px', marginTop: '12px' }}>\n          <Paper variant=\"outlined\" disableElevation>\n            <Grid container direction='row' alignItems=\"center\" spacing={3} style={{ padding: '13px', paddingLeft: '34px' }}>\n              <Grid item xs={4}>\n                <Typography color='textSecondary'>Pool Token balance:</Typography>\n                <Typography> {(coin !== '')?dexState.token[coin].totalqty:''} {coin}</Typography>\n              </Grid>\n              <Grid item xs={4}>\n                <Typography color='textSecondary'>Pool XTZ balance:</Typography>\n                <Typography> {(coin !== '')?dexState.token[coin].poolvalue / 1000000 + ' XTZ':''}</Typography>\n              </Grid>\n              <Grid item xs={4}>\n                <Typography color='textSecondary'>Total Liquidity Tokens:</Typography>\n                <Typography> {(coin !== '')?dexState.token[coin].totallqt + ' LQT':''}</Typography>\n              </Grid>\n            </Grid>\n          </Paper>\n        </Grid>\n        <Grid item xs={12}>\n          <Grid container direction='row' style={{ width: '100%' }}>\n            <Grid item style={{ width: '45%' }}>\n              <RightEx/>\n            </Grid>\n            <Grid item style={{ textAlign: '-webkit-center', width: '10%' }}>\n              <VerticialDivider></VerticialDivider>\n            </Grid>\n            <Grid item style={{ width: '45%' }}>\n              <LeftEx/>\n          </Grid>\n        </Grid>\n      </Grid>\n        <Grid item xs={12}>\n          <Divider></Divider>\n        </Grid>\n        <Grid item xs={12} style={{ textAlign: 'right', paddingRight : 24, paddingBottom : 16 }}>\n          <Button onClick={handleRedeem} disabled={!ready || dexState.redeemer.amount === ''} variant='contained' color='secondary' disableElevation>redeem liquidiy</Button>\n        </Grid>\n      </Grid>\n    </Paper>\n  )\n  }\n\n  export default Redeemer;","import './App.css';\nimport React, { useState } from 'react';\nimport { DAppProvider, useConnect, useAccountPkh, useReady } from './dapp.js';\nimport { DexProvider, useDexStateContext } from './dexstate';\nimport { appName, appTitle, network } from './settings';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport HeaderBar from './components/HeaderBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Container from '@material-ui/core/Container';\nimport SnackMsg from './components/SnackMsg';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Exchange from './components/Dex';\nimport Provider from './components/Provider';\nimport Redeemer from './components/Redeemer';\nimport { TezosToolkit } from '@taquito/taquito';\n\nconst Tezos = new TezosToolkit('https://'+network+'-tezos.giganode.io');\n\nfunction App() {\n  return (\n    <DAppProvider appName={appName}>\n      <DexProvider>\n        <React.Suspense fallback={null}>\n            <PageRouter />\n        </React.Suspense>\n      </DexProvider>\n    </DAppProvider>\n  );\n}\n\nconst getComponent = (value, openSnack, closeSnack) => {\n  switch (value) {\n    case 0: return <Exchange openSnack={openSnack} closeSnack={closeSnack}/>;\n    case 1: return <Provider openSnack={openSnack} closeSnack={closeSnack}/>;\n    case 2: return <Redeemer openSnack={openSnack} closeSnack={closeSnack}/>;\n    default: return <div></div>;\n  }\n}\n\nconst PageRouter = () => {\n  const [viewSnack, setViewSnack] = useState(false);\n  const [initialized, setInitialized] = useState(false);\n  const [computeBalance, setComputeBalance] = useState(false);\n  const [value, setValue] = React.useState(0);\n  const account = useAccountPkh();\n  const ready = useReady();\n  const { setBalance, loadLiquidity } = useDexStateContext();\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n  var connect = useConnect();\n  const prefersDarkMode = false; /* useMediaQuery('(prefers-color-scheme: dark)'); */\n  const handleConnect = React.useCallback(async () => {\n    try {\n      await connect(network);\n      setComputeBalance(true);\n    } catch (err) {\n      alert(err.message);\n    };\n  }, [connect]);\n  const theme = React.useMemo(\n    () =>\n      createMuiTheme({\n        palette: {\n          type: prefersDarkMode ? 'dark' : 'light',\n          secondary: {\n            light: prefersDarkMode ? '#4b85f2' :'#26457c',\n            main: prefersDarkMode ? '#4681f0' : '#162b52',\n            dark: prefersDarkMode ? '#3361b8' :'#14233f',\n            contrastText: '#fff',\n          }\n        },\n      }),\n    [prefersDarkMode],\n  );\n  const openSnack = () => {\n    setViewSnack(true);\n  }\n  const closeSnack = () => {\n    setViewSnack(false);\n  }\n  if (account !== null && !initialized) {\n    loadLiquidity();\n    setInitialized(true);\n  }\n  if (ready && computeBalance) {\n    Tezos.tz\n      .getBalance(account)\n      .then((balance) => { setBalance(balance / 1000000) })\n      .catch((error) => console.log(JSON.stringify(error)));\n    setComputeBalance(false);\n  }\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline/>\n      <HeaderBar appTitle={appTitle} handleConnect={handleConnect} theme={theme} />\n      <Container>\n        <Tabs\n          value={value}\n          indicatorColor=\"secondary\"\n          textColor={ prefersDarkMode ? \"default\" : \"secondary\"}\n          onChange={handleChange}\n          aria-label=\"disabled tabs example\"\n          style={{ marginTop: '10px' }}\n        >\n          <Tab label=\"Exchange\" />\n          <Tab label=\"Provide Liquidity\"/>\n          <Tab label=\"Redeem Liquidity\"/>\n          <Tab label=\"History\" disabled />\n        </Tabs>\n        { getComponent(value, openSnack, closeSnack) }\n      </Container>\n      <SnackMsg open={viewSnack} theme={theme} />\n    </ThemeProvider>\n  )\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}